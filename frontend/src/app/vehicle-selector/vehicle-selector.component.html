<div class="vehicle-selector">
    <div class="header">
        <h1 class="glow-text">SELECT VEHICLE</h1>
        <p class="subtitle">ENTER YEAR, MAKE, AND MODEL</p>
    </div>

    <div class="search-container">
        <div class="search-box">
            <input type="text" class="search-input" placeholder="e.g. 2015 Ford F-150" [(ngModel)]="searchTerm"
                (input)="onSearchInput()" autofocus>
            <div class="search-icon" *ngIf="!loading">üîç</div>
            <div class="spinner" *ngIf="loading"></div>
        </div>

        <div class="parsed-badges" *ngIf="parsedYear">
            <span class="badge year">{{ parsedYear }}</span>
            <span class="badge make" *ngIf="parsedMake">{{ parsedMake.label }}</span>
            <span class="badge model" *ngIf="parsedModel">{{ parsedModel.label }}</span>
        </div>
    </div>

    <div class="results-container">
        <div *ngIf="error" class="error-message">
            ‚ö†Ô∏è {{ error }}
        </div>

        <div class="suggestions-list" *ngIf="suggestions.length > 0">
            <h3 class="list-header">
                {{ suggestionType === 'history' ? 'RECENT VEHICLES' :
                suggestionType === 'year' ? 'SELECT YEAR' :
                suggestionType === 'make' ? 'SELECT MAKE' :
                suggestionType === 'model' ? 'SELECT MODEL' : 'SELECT ENGINE' }}
            </h3>

            <div class="suggestion-item" *ngFor="let item of suggestions"
                (click)="suggestionType === 'engine' ? selectEngine(item) : selectSuggestion(item)">

                <div class="item-icon">
                    {{ suggestionType === 'history' ? 'üïí' : '' }}
                </div>

                <div class="item-info">
                    <div class="item-label">
                        {{ suggestionType === 'history' ? item.vehicleName : item.label }}
                    </div>
                    <div class="item-sub" *ngIf="suggestionType === 'history'">
                        {{ item.vehicleId }}
                    </div>
                </div>

                <div class="item-arrow">‚Üí</div>
            </div>
        </div>

        <div class="empty-state" *ngIf="suggestions.length === 0 && !loading && !error">
            <p>Start typing to search for a vehicle.</p>
            <p class="hint">Example: "2020 Toyota Camry"</p>
        </div>
    </div>
</div>